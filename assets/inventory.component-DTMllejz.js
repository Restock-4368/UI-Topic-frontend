import{r as P,w as M,c as E,a as b,b as o,d as f,e as S,f as a,t as u,g as y,h as B,i as U,v as V,o as v,_ as I}from"./index-BPx0zh6T.js";import{S as A}from"./supply-category.service-DG2za2yw.js";import{U as D,a as R}from"./unit-measurement.assembler-CZF0yaGD.js";import{U as j}from"./unit-measurement.service-BDVZFFlz.js";import{S as z,a as W}from"./supply.assembler-CSpomLG2.js";import{S as L}from"./supply.service-CTib3cY-.js";import{S as q}from"./supply-batch.entity-DarSUpWa.js";import{S as N}from"./supply-batch.service-2mzdXacD.js";const F={style:{padding:"1rem"}},O={style:{"font-size":"1.25rem","font-weight":"600"}},H={style:{"font-size":"0.875rem",color:"#6b7280"}},G={style:{padding:"1rem"}},J={style:{display:"flex","flex-direction":"column",gap:"1rem"}},K={for:"name",class:"form-label"},Q={for:"category",class:"form-label"},X={for:"unit",class:"form-label"},Y={for:"description",class:"form-label"},Z={class:"form-label"},ee={style:{display:"flex","flex-direction":"column",gap:"0.5rem"}},te={style:{display:"flex","align-items":"center",gap:"0.5rem"}},le={style:{display:"flex","align-items":"center",gap:"0.5rem"}},ie={key:0},oe={for:"min_stock",class:"form-label"},ne={key:1},se={for:"max_stock",class:"form-label"},ae={key:2},re={for:"price",class:"form-label"},de={style:{display:"flex","flex-wrap":"wrap",gap:"1rem","justify-content":"center","margin-top":"1.5rem"}},pe={__name:"inventory-supply-create-and-edit.component",props:{visible:Boolean,isEdit:Boolean,role:{type:String,default:"admin"},supplyToEdit:{type:Object,default:()=>({name:"",description:"",unit_measurement_id:null,category_id:null,category:null,unit:null,perishable:"No",min_stock:0,max_stock:0})},categories:Array,units:Array},emits:["update:visible","create","update","cancel"],setup(e,{emit:l}){const r=e,m=l,t=P({name:"",description:"",category_id:null,unit_measurement_id:null,category:null,unit:null,perishable:!1,min_stock:0,max_stock:0,price:null}),d=()=>{t.value={name:"",description:"",category_id:null,unit_measurement_id:null,category:null,unit:null,perishable:!1,min_stock:0,max_stock:0,price:null}};M(()=>r.supplyToEdit,n=>{r.isEdit&&n?t.value={name:n.name||"",description:n.description||"",category_id:n.category_id||null,unit_measurement_id:n.unit_measurement_id||null,category:n.category_id||null,unit:n.unit_measurement_id||null,perishable:n.perishable===!0,min_stock:n.min_stock||null,max_stock:n.max_stock||null,price:n.price||null}:d()},{immediate:!0});const c=()=>{var i,p;const n={name:t.value.name,description:t.value.description,category_id:t.value.category_id,unit_measurement_id:t.value.unit_measurement_id,category:((i=r.categories.find(h=>h.id===t.value.category))==null?void 0:i.name)??"",unit:((p=r.units.find(h=>h.id===t.value.unit))==null?void 0:p.name)??"",perishable:t.value.perishable,min_stock:t.value.min_stock,max_stock:t.value.max_stock,price:t.value.price};r.isEdit?m("update",n):m("create",n),d(),m("update:visible",!1)},g=()=>{d(),m("cancel"),m("update:visible",!1)};return(n,i)=>{const p=y("pv-input-text"),h=y("pv-dropdown"),_=y("pv-input-number"),k=y("pv-button"),x=y("pv-dialog");return v(),E(x,{header:e.isEdit?n.$t("inventory.supplies-catalog-create-and-edit-modal.edit-title"):n.$t("inventory.supplies-catalog-create-and-edit-modal.create-title"),visible:e.visible,"onUpdate:visible":i[9]||(i[9]=s=>n.$emit("update:visible",s)),modal:"",style:{width:"95vw",maxWidth:"600px"}},{header:b(()=>[o("div",F,[o("h2",O,u(e.isEdit?n.$t("inventory.supplies-catalog-create-and-edit-modal.edit-title"):n.$t("inventory.supplies-catalog-create-and-edit-modal.create-title")),1),o("p",H,u(e.isEdit?n.$t("inventory.supplies-catalog-create-and-edit-modal.edit-subtitle"):n.$t("inventory.supplies-catalog-create-and-edit-modal.create-subtitle")),1)])]),default:b(()=>[o("div",G,[o("div",J,[o("div",null,[o("label",K,u(n.$t("inventory.supplies-catalog-create-and-edit-modal.supply-name")),1),a(p,{id:"name",modelValue:t.value.name,"onUpdate:modelValue":i[0]||(i[0]=s=>t.value.name=s),placeholder:n.$t("inventory.supplies-catalog-create-and-edit-modal.supply-name-placeholder"),class:"w-full"},null,8,["modelValue","placeholder"])]),o("div",null,[o("label",Q,u(n.$t("inventory.supplies-catalog-create-and-edit-modal.supply-category")),1),a(h,{id:"category",options:e.categories,optionLabel:"name",optionValue:"id",modelValue:t.value.category_id,"onUpdate:modelValue":i[1]||(i[1]=s=>t.value.category_id=s),placeholder:n.$t("inventory.supplies-catalog-create-and-edit-modal.supply-category-placeholder"),class:"w-full"},null,8,["options","modelValue","placeholder"])]),o("div",null,[o("label",X,u(n.$t("inventory.supplies-catalog-create-and-edit-modal.unit-of-measure")),1),a(h,{id:"unit",options:e.units,optionLabel:"name",optionValue:"id",modelValue:t.value.unit_measurement_id,"onUpdate:modelValue":i[2]||(i[2]=s=>t.value.unit_measurement_id=s),placeholder:n.$t("inventory.supplies-catalog-create-and-edit-modal.unit-of-measure-placeholder"),class:"w-full"},null,8,["options","modelValue","placeholder"])]),o("div",null,[o("label",Y,u(n.$t("inventory.supplies-catalog-create-and-edit-modal.description")),1),a(p,{id:"description",modelValue:t.value.description,"onUpdate:modelValue":i[3]||(i[3]=s=>t.value.description=s),placeholder:n.$t("inventory.supplies-catalog-create-and-edit-modal.description-placeholder"),class:"w-full"},null,8,["modelValue","placeholder"])]),o("div",null,[o("label",Z,u(n.$t("inventory.supplies-catalog-create-and-edit-modal.pereshible")),1),o("div",ee,[o("label",te,[B(o("input",{type:"radio",id:"nonPerishable",value:!1,"onUpdate:modelValue":i[4]||(i[4]=s=>t.value.perishable=s)},null,512),[[V,t.value.perishable]]),U(" "+u(n.$t("inventory.supplies-catalog-create-and-edit-modal.is-not-perishable")),1)]),o("label",le,[B(o("input",{type:"radio",id:"perishable",value:!0,"onUpdate:modelValue":i[5]||(i[5]=s=>t.value.perishable=s)},null,512),[[V,t.value.perishable]]),U(" "+u(n.$t("inventory.supplies-catalog-create-and-edit-modal.is-perishable")),1)])])]),r.role==="admin"?(v(),f("div",ie,[o("label",oe,u(n.$t("inventory.supplies-catalog-create-and-edit-modal.minimum-stock")),1),a(_,{id:"min_stock",modelValue:t.value.min_stock,"onUpdate:modelValue":i[6]||(i[6]=s=>t.value.min_stock=s),min:0,placeholder:n.$t("inventory.supplies-catalog-create-and-edit-modal.minimum-stock-placeholder"),class:"w-full"},null,8,["modelValue","placeholder"])])):S("",!0),r.role==="admin"?(v(),f("div",ne,[o("label",se,u(n.$t("inventory.supplies-catalog-create-and-edit-modal.maximum-stock")),1),a(_,{id:"max_stock",modelValue:t.value.max_stock,"onUpdate:modelValue":i[7]||(i[7]=s=>t.value.max_stock=s),min:0,placeholder:n.$t("inventory.supplies-catalog-create-and-edit-modal.maximum-stock-placeholder"),class:"w-full"},null,8,["modelValue","placeholder"])])):S("",!0),r.role!=="admin"?(v(),f("div",ae,[o("label",re,u(n.$t("inventory.supplies-catalog-create-and-edit-modal.price")),1),a(_,{id:"price",modelValue:t.value.price,"onUpdate:modelValue":i[8]||(i[8]=s=>t.value.price=s),mode:"currency",currency:"USD",locale:"en-US",min:0,step:.01,placeholder:n.$t("inventory.supplies-catalog-create-and-edit-modal.price-placeholder"),class:"w-full"},null,8,["modelValue","placeholder"])])):S("",!0)]),o("div",de,[a(k,{label:n.$t("inventory.cancel-button"),icon:"pi pi-times-circle",severity:"danger",class:"red-button",onClick:g},null,8,["label"]),a(k,{label:e.isEdit?n.$t("inventory.save-button"):n.$t("inventory.create-button"),icon:e.isEdit?"pi pi-pen-to-square":"pi pi-save",class:"green-button",onClick:c},null,8,["label","icon"])])])]),_:1},8,["header","visible"])}}},ue={class:"p-2"},ce={class:"text-lg sm:text-xl font-semibold"},me={class:"text-sm font-light text-gray-500"},ye={class:"p-2"},ve={for:"supply",class:"block text-sm font-medium text-gray-700 mb-2"},he={for:"stock",class:"block text-sm font-medium text-gray-700 mb-1"},be={key:0},ge={for:"expiry",class:"block text-sm font-medium text-gray-700 mb-1"},fe={class:"flex flex-wrap justify-content-center sm:justify-content-around align-items-center gap-2 pt-4"},_e={__name:"inventory-supply-add-and-edit.component",props:{visible:Boolean,isEdit:Boolean,supplies:Array,itemToEdit:{type:Object,default:()=>({supply:null,stock:0,expiry:null})}},emits:["update:visible","create","update","cancel"],setup(e,{emit:l}){const r=e,m=l,t=P({supply:null,stock:0,expiry:null,perishable:!1}),d=i=>i?new Date(i).toISOString().split("T")[0]:null,c=()=>{t.value={supply:null,stock:0,expiry:null,perishable:!1}};M(()=>t.value.supply,i=>{t.value.perishable=(i==null?void 0:i.perishable)===!0}),M(()=>r.itemToEdit,i=>{var p;r.isEdit&&i?t.value={supply:i.supply,stock:i.stock,expiry:i.expiry,perishable:((p=i.supply)==null?void 0:p.perishable)===!0}:c()},{immediate:!0});const g=()=>{if(!t.value.supply||!t.value.supply.id){alert("Por favor, seleccione un insumo vÃ¡lido");return}const i={supply_id:t.value.supply.id,stock:t.value.stock,expiration_date:t.value.perishable?d(t.value.expiry):null};r.isEdit?m("update",i):m("create",i),c(),m("update:visible",!1)},n=()=>{c(),m("cancel"),m("update:visible",!1)};return(i,p)=>{const h=y("pv-dropdown"),_=y("pv-input-text"),k=y("pv-input-number"),x=y("pv-calendar"),s=y("pv-button"),C=y("pv-dialog");return v(),E(C,{header:e.isEdit?i.$t("inventory.supplies-inventory-add-and-edit-modal.edit-title"):i.$t("inventory.supplies-inventory-add-and-edit-modal.add-title"),visible:e.visible,"onUpdate:visible":p[3]||(p[3]=w=>i.$emit("update:visible",w)),modal:"",class:"w-full sm:w-10 md:w-6 lg:w-4"},{header:b(()=>[o("div",ue,[o("h2",ce,u(e.isEdit?i.$t("inventory.supplies-inventory-add-and-edit-modal.edit-title"):i.$t("inventory.supplies-inventory-add-and-edit-modal.add-title")),1),o("p",me,u(e.isEdit?i.$t("inventory.supplies-inventory-add-and-edit-modal.edit-subtitle"):i.$t("inventory.supplies-inventory-add-and-edit-modal.add-subtitle")),1)])]),default:b(()=>{var w;return[o("div",ye,[o("div",null,[o("label",ve,u(i.$t("inventory.supplies-inventory-add-and-edit-modal.supply-name")),1),e.isEdit?(v(),E(_,{key:1,value:(w=t.value.supply)==null?void 0:w.name,disabled:"",class:"w-full mb-3"},null,8,["value"])):(v(),E(h,{key:0,id:"supply",options:e.supplies,optionLabel:"name",modelValue:t.value.supply,"onUpdate:modelValue":p[0]||(p[0]=$=>t.value.supply=$),placeholder:i.$t("inventory.supplies-inventory-add-and-edit-modal.supply-name-placeholder"),class:"w-full mb-3"},null,8,["options","modelValue","placeholder"]))]),o("div",null,[o("label",he,u(i.$t("inventory.supplies-inventory-add-and-edit-modal.supply-quantity")),1),a(k,{id:"stock",modelValue:t.value.stock,"onUpdate:modelValue":p[1]||(p[1]=$=>t.value.stock=$),min:0,mode:"decimal",class:"w-full mb-3",placeholder:i.$t("inventory.supplies-inventory-add-and-edit-modal.supply-quantity-placeholder")},null,8,["modelValue","placeholder"])]),t.value.perishable?(v(),f("div",be,[o("label",ge,u(i.$t("inventory.supplies-inventory-add-and-edit-modal.supply-expiration-date")),1),a(x,{id:"expiry",modelValue:t.value.expiry,"onUpdate:modelValue":p[2]||(p[2]=$=>t.value.expiry=$),showIcon:"",class:"w-full mb-3",placeholder:i.$t("inventory.supplies-inventory-add-and-edit-modal.supply-expiration-date-placeholder")},null,8,["modelValue","placeholder"])])):S("",!0),o("div",fe,[a(s,{label:i.$t("inventory.cancel-button"),icon:"pi pi-times-circle",severity:"danger",class:"red-button w-full sm:w-auto",onClick:n},null,8,["label"]),a(s,{label:e.isEdit?i.$t("inventory.save-button"):i.$t("inventory.create-button"),icon:e.isEdit?"pi pi-pen-to-square":"pi pi-plus-circle",class:"green-button w-full sm:w-auto",onClick:g},null,8,["label","icon"])])])]}),_:1},8,["header","visible"])}}},we={name:"InventorySupplyCard",props:{supply:{type:Object,required:!0}}},ke={class:"p-3 m-2 surface-card border-round border-1 surface-border text-center shadow-2",style:{"min-width":"230px","max-width":"320px"}},Ee={class:"mb-2 text-primary font-bold"},Se={class:"text-sm text-500 mb-1"},xe={class:"text-sm mb-3 text-color-secondary"};function $e(e,l,r,m,t,d){const c=y("pv-button");return v(),f("div",ke,[o("h4",Ee,u(r.supply.name),1),o("p",Se,[o("strong",null,u(r.supply.category),1),U(" - "+u(r.supply.unit),1)]),o("p",xe,u(r.supply.description),1),a(c,{icon:"pi pi-pen-to-square",label:e.$t("inventory.edit-button"),size:"small",class:"green-button",onClick:l[0]||(l[0]=g=>e.$emit("edit",r.supply))},null,8,["label"])])}const Ce=I(we,[["render",$e]]);class T{constructor({id:l="",name:r=""}={}){this.id=l,this.name=r}}class Me{static toEntity(l){return new T(l)}static toEntities(l){return l.map(r=>this.toEntity(r))}static toEntitiesFromResponse(l){return this.toEntities(l.data)}static toResource(l){return{name:l.name}}}const Ue={name:"InventoryComponent",components:{inventorySupplyCreateAndEdit:pe,inventorySupplyAddAndEdit:_e,InventorySupplyCard:Ce},computed:{isMobileView(){return this.windowWidth<=640},filteredInventory(){if(!this.search.trim())return this.batches;const e=this.search.toLowerCase();return this.batches.filter(l=>l.name.toLowerCase().includes(e)||l.category&&l.category.toLowerCase().includes(e))},paginationStart(){return(this.currentPage-1)*this.itemsPerPage+1},paginationEnd(){return Math.min(this.currentPage*this.itemsPerPage,this.filteredInventory.length)},totalPages(){return Math.ceil(this.filteredInventory.length/this.itemsPerPage)},paginatedInventory(){const e=(this.currentPage-1)*this.itemsPerPage,l=e+this.itemsPerPage;return this.filteredInventory.slice(e,l)}},data(){return{role:"admin",showSupplyModal:!1,search:"",showInventoryModal:!1,selectedInventoryItem:null,isEditing:!1,supplyToEdit:null,itemToDelete:null,showDeleteModal:!1,categories:[],category:new T,categoryService:new A,units:[],unitMeasurement:new R,UnitMeasurementService:new j,supplies:[],supplyBatchService:new N,supplyService:new L,batches:[],providers:["Proveedor A","Proveedor B","Proveedor C"],currentPage:1,itemsPerPage:5,windowWidth:window.innerWidth}},mounted(){window.addEventListener("resize",this.handleResize),this.loadCategories(),this.loadUnits(),this.loadSupplies(),this.loadBatchesWithSupply()},beforeUnmount(){window.removeEventListener("resize",this.handleResize)},methods:{handleResize(){this.windowWidth=window.innerWidth},async updateBatch(e){try{const l=this.selectedInventoryItem.id,r={supply_id:e.supply_id,stock:e.stock,expiration_date:e.expiration_date,user_id:2};await this.supplyBatchService.update(l,r),await this.loadBatchesWithSupply(),this.showInventoryModal=!1}catch(l){console.error("Error al actualizar batch de insumo:",l)}},async deleteBatch(){try{await this.supplyBatchService.delete(this.itemToDelete.id),await this.loadBatchesWithSupply(),this.showDeleteModal=!1,this.itemToDelete=null}catch(e){console.error("Error al eliminar el batch:",e)}},async createSupply(e){try{const l={name:e.name,description:e.description,perishable:e.perishable,category_id:e.category_id,unit_measurement_id:e.unit_measurement_id,min_stock:e.min_stock??null,max_stock:e.max_stock??null,price:e.price,user_id:2};await this.supplyService.create(l),await this.loadSupplies(),this.showSupplyModal=!1}catch(l){console.error("Error al crear el insumo:",l)}},async updateSupply(e){try{const l=this.supplyToEdit.id,r={name:e.name,description:e.description,perishable:e.perishable,category_id:e.category_id,unit_measurement_id:e.unit_measurement_id,min_stock:e.min_stock??null,max_stock:e.max_stock??null,price:e.price,user_id:2};await this.supplyService.update(l,r),await this.loadSupplies(),this.showSupplyModal=!1}catch(l){console.error("Error al actualizar insumo:",l)}},async createBatch(e){try{const l={supply_id:e.supply_id,stock:e.stock,expiration_date:e.expiration_date!==void 0?e.expiration_date:null,user_id:2};await this.supplyBatchService.create(l),await this.loadBatchesWithSupply(),this.showInventoryModal=!1}catch(l){console.error("Error al crear el batch:",l)}},async loadBatchesWithSupply(){try{const l=(await this.supplyBatchService.getAll()).data,r=[];for(const m of l){const t=new q(m);try{const d=await this.supplyService.getById(t.supply_id),c=new W(d.data),g=await this.categoryService.getById(c.category_id);c.category=g.data.name;const n=await this.UnitMeasurementService.getById(c.unit_measurement_id);c.unit=n.data.name,r.push({...c,...t,category:c.category,unit:c.unit})}catch(d){console.error(`Error al cargar supply/categorÃ­a/unidad para batch id ${t.id}`,d),r.push(t)}}this.batches=r}catch(e){console.error("Error al cargar los batches:",e)}},async loadSupplies(){try{const e=await this.supplyService.getAll(),l=z.toEntitiesFromResponse(e),r=[];for(const m of l){try{const[t,d]=await Promise.all([this.categoryService.getById(m.category_id),this.UnitMeasurementService.getById(m.unit_measurement_id)]);m.category=t.data.name,m.unit=d.data.name}catch(t){console.error(`Error obteniendo detalles de supply con ID ${m.id}`,t)}r.push(m)}this.supplies=r,console.log("Estos son los supplies:",this.supplies)}catch(e){console.error("Error al cargar los supplies:",e)}},async loadCategories(){try{const e=await this.categoryService.getAll();this.categories=Me.toEntitiesFromResponse(e)}catch(e){console.error("Error loading categories:",e)}},async loadUnits(){this.UnitMeasurementService.getAll().then(e=>{this.units=D.toEntitiesFromResponse(e)}).catch(e=>{console.error("Error al cargar las unidades de medida:",e)})},openCreateModal(){this.isEditing=!1,this.supplyToEdit=null,this.showSupplyModal=!0},openEditModal(e){this.isEditing=!0,this.supplyToEdit={...e},this.showSupplyModal=!0},openAddModal(){this.isEditing=!1,this.selectedInventoryItem=null,this.showInventoryModal=!0},openInventoryEditModal(e){const l=this.supplies.find(r=>r.id===e.supply_id);this.selectedInventoryItem={id:e.id,supply:l||null,stock:e.stock,provider:e.provider||null,expiry:e.expiration_date||null},this.isEditing=!0,this.showInventoryModal=!0},confirmDelete(e){this.itemToDelete=e,this.showDeleteModal=!0},getExpirationRowClass(e){return e.expiration_date&&new Date(e.expiration_date)<new Date?"expired-row":""}}},Be={class:"flex flex-column gap-4"},Ve={class:"surface-card shadow-4 p-4 border-round-3xl"},Pe={class:"flex flex-wrap justify-content-between align-items-center gap-3 mb-4"},Ie={class:"m-0 w-full sm:w-auto text-lg font-semibold"},Te={key:0,class:"flex flex-column align-items-center justify-content-center text-center gap-2 p-3"},Ae={class:"text-sm sm:text-base font-light m-0"},De={key:1},Re={class:"surface-card p-4 border-round-3xl"},je={class:"flex flex-wrap gap-3 justify-between align-items-center mb-4"},ze={class:"m-0 w-full lg:w-auto text-lg font-semibold"},We={class:"flex align-items-center gap-2 w-full sm:w-auto justify-content-center sm:justify-content-end"},Le={class:"text-sm"},qe={style:{"overflow-x":"auto",background:"white","border-radius":"8px",padding:"16px","max-height":"400px"}},Ne={style:{display:"flex",gap:"8px","justify-content":"center"}},Fe={class:"p-1"},Oe={class:"font-light",style:{"white-space":"pre-line"}},He={class:"flex justify-content-end gap-2"};function Ge(e,l,r,m,t,d){const c=y("pv-button"),g=y("inventory-supply-card"),n=y("pv-carousel"),i=y("pv-input-text"),p=y("pv-column"),h=y("pv-data-table"),_=y("pv-dialog"),k=y("inventory-supply-create-and-edit"),x=y("inventorySupplyAddAndEdit");return v(),f("div",null,[o("div",Be,[o("div",Ve,[o("div",Pe,[o("h1",Ie,u(e.$t("inventory.supplies-catalog-title")),1),a(c,{label:e.$t("inventory.create-button"),icon:"pi pi-plus-circle",onClick:d.openCreateModal,class:"green-button w-full sm:w-auto"},null,8,["label","onClick"])]),t.supplies.length===0?(v(),f("div",Te,[o("p",Ae,u(e.$t("inventory.supplies-catalog-create-and-edit-modal.not-supplies")),1),a(c,{label:e.$t("inventory.create-button"),icon:"pi pi-plus-circle",class:"green-button w-full sm:w-auto",onClick:d.openCreateModal},null,8,["label","onClick"])])):(v(),f("div",De,[a(n,{value:t.supplies,numVisible:3,numScroll:1,showIndicators:d.isMobileView,showNavigators:!d.isMobileView,responsiveOptions:[{breakpoint:"960px",numVisible:2,numScroll:1},{breakpoint:"640px",numVisible:1,numScroll:1}]},{item:b(s=>[a(g,{supply:s.data,onEdit:d.openEditModal},null,8,["supply","onEdit"])]),_:1},8,["value","showIndicators","showNavigators"])]))]),o("div",Re,[o("div",je,[o("h1",ze,u(e.$t("inventory.supplies-inventory-title")),1),a(i,{modelValue:t.search,"onUpdate:modelValue":l[0]||(l[0]=s=>t.search=s),placeholder:e.$t("inventory.supplies-inventory-placeholder"),class:"font-light w-full sm:w-10 md:w-8 lg:w-5"},null,8,["modelValue","placeholder"]),a(c,{label:e.$t("inventory.add-button"),icon:"pi pi-plus-circle",onClick:d.openAddModal,class:"green-button w-full sm:w-auto"},null,8,["label","onClick"]),o("div",We,[o("span",Le,u(d.paginationStart)+"-"+u(d.paginationEnd)+" de "+u(d.filteredInventory.length),1),a(c,{icon:"pi pi-angle-left",text:"",disabled:t.currentPage===1,onClick:l[1]||(l[1]=s=>t.currentPage--)},null,8,["disabled"]),a(c,{icon:"pi pi-angle-right",text:"",disabled:t.currentPage>=d.totalPages,onClick:l[2]||(l[2]=s=>t.currentPage++)},null,8,["disabled"])])]),o("div",qe,[a(h,{value:d.paginatedInventory,rowClass:s=>d.getExpirationRowClass(s),scrollable:"",scrollHeight:"300px",responsiveLayout:"scroll",style:{"min-width":"900px","font-size":"14px"}},{default:b(()=>[a(p,{field:"name",header:e.$t("inventory.table.supply")},null,8,["header"]),a(p,{field:"category",header:e.$t("inventory.table.category")},null,8,["header"]),a(p,{field:"unit",header:e.$t("inventory.table.unit")},null,8,["header"]),a(p,{field:"expiration_date",header:e.$t("inventory.table.expiration-date")},null,8,["header"]),a(p,{field:"stock",header:e.$t("inventory.table.stock")},null,8,["header"]),t.role==="admin"?(v(),E(p,{key:0,field:"min_stock",header:e.$t("inventory.table.minimum-stock")},null,8,["header"])):S("",!0),t.role==="admin"?(v(),E(p,{key:1,field:"max_stock",header:e.$t("inventory.table.maximum-stock")},null,8,["header"])):S("",!0),a(p,{field:"perishable",header:e.$t("inventory.table.pereshible")},null,8,["header"]),a(p,{header:e.$t("inventory.table.actions"),style:{"min-width":"120px"}},{body:b(s=>[o("div",Ne,[a(c,{icon:"pi pi-pen-to-square",text:"",style:{color:"#16a34a"},onClick:()=>d.openInventoryEditModal(s.data)},null,8,["onClick"]),a(c,{icon:"pi pi-trash",text:"",severity:"danger",style:{color:"#dc2626"},onClick:()=>d.confirmDelete(s.data)},null,8,["onClick"])])]),_:1},8,["header"])]),_:1},8,["value","rowClass"])])])]),a(_,{visible:t.showDeleteModal,modal:"",header:e.$t("inventory.supplies-inventory-delete-modal.title"),style:{width:"450px"},"onUpdate:visible":l[4]||(l[4]=s=>t.showDeleteModal=s)},{footer:b(()=>[o("div",He,[a(c,{label:e.$t("inventory.supplies-inventory-delete-modal.cancel-button"),severity:"danger",onClick:l[3]||(l[3]=s=>t.showDeleteModal=!1),class:"red-button"},null,8,["label"]),a(c,{label:e.$t("inventory.supplies-inventory-delete-modal.confirm-button"),severity:"success",onClick:d.deleteBatch,class:"green-button"},null,8,["label","onClick"])])]),default:b(()=>{var s,C,w;return[o("div",Fe,[o("p",Oe,u(e.$t("inventory.supplies-inventory-delete-modal.delete-message",{name:(s=t.itemToDelete)==null?void 0:s.name,quantity:`${(C=t.itemToDelete)==null?void 0:C.stock} ${(w=t.itemToDelete)==null?void 0:w.unit}`})),1)])]}),_:1},8,["visible","header"]),a(k,{role:t.role,visible:t.showSupplyModal,isEdit:t.isEditing,supplyToEdit:t.supplyToEdit,categories:t.categories,units:t.units,onCreate:d.createSupply,onUpdate:d.updateSupply,onCancel:l[5]||(l[5]=s=>t.showSupplyModal=!1),"onUpdate:visible":l[6]||(l[6]=s=>t.showSupplyModal=s)},null,8,["role","visible","isEdit","supplyToEdit","categories","units","onCreate","onUpdate"]),a(x,{role:t.role,visible:t.showInventoryModal,isEdit:t.isEditing,itemToEdit:t.selectedInventoryItem,supplies:t.supplies,providers:t.providers,onCreate:d.createBatch,"onUpdate:visible":l[7]||(l[7]=s=>t.showInventoryModal=s),onUpdate:d.updateBatch,onCancel:l[8]||(l[8]=s=>t.showInventoryModal=!1)},null,8,["role","visible","isEdit","itemToEdit","supplies","providers","onCreate","onUpdate"])])}const lt=I(Ue,[["render",Ge]]);export{lt as default};
